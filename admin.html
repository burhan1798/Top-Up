<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel</title>
  <style>
  body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    overflow: hidden;
    background: linear-gradient(135deg, #f5f6fa, #dfe9f3);
    position: relative;
    height: 100vh;
  }

  header {
    background: linear-gradient(90deg, #ff416c, #ff4b2b);
    padding: 20px;
    color: white;
    font-size: 24px;
    font-weight: bold;
    position: relative;
    z-index: 2;
  }

  /* Fullscreen bubble container */
  #bubbles {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    overflow: hidden;
  }

  .bubble {
    position: absolute;
    bottom: -100px;
    border-radius: 50%;
    animation: rise 6s linear infinite;
    opacity: 0.7;
    filter: blur(1px);
  }

  /* Colorful gradient bubbles */
  .bubble::before {
    content: "";
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, rgba(255,0,150,0.6), rgba(0,200,255,0.4));
  }

  @keyframes rise {
    0% { transform: translateY(0) scale(1); opacity: 0.7; }
    50% { opacity: 0.4; }
    100% { transform: translateY(-120vh) scale(1.3); opacity: 0; }
  }

  .tabs {
    display: flex;
    gap: 10px;
    padding: 15px;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    border-radius: 10px;
    margin: 10px;
    z-index: 2;
    position: relative;
  }

  .tab {
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 500;
    background: #eee;
  }

  .tab.active {
    background: #ff4b2b;
    color: white;
  }

  .content {
    padding: 20px;
    z-index: 2;
    position: relative;
  }

  .card {
    background: rgba(255,255,255,0.9);
    margin-bottom: 15px;
    border-radius: 10px;
    padding: 15px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.05);
    animation: fadeIn 0.6s ease;
  }

  @keyframes fadeIn {
    from {opacity:0;transform: translateY(10px);}
    to {opacity:1;transform: translateY(0);}
  }
</style>
</head>
<body>

<header>
  Admin Panel
  <!-- Bubble container -->
  <div id="bubbles"></div>
</header>

<div class="tabs">
  <div class="tab active" onclick="showTab('users')">Registered Users</div>
  <div class="tab" onclick="showTab('topups')">Topup Requests</div>
</div>

<div class="content">
  <div id="usersTab"></div>
  <div id="topupTab" style="display:none;"></div>
</div>

<script>
  // Bubble Generator for full screen
  const bubbleContainer = document.createElement('div');
  bubbleContainer.id = 'bubbles';
  document.body.appendChild(bubbleContainer);

  for(let i=0; i<20; i++){
    const bubble = document.createElement('div');
    bubble.className = 'bubble';
    const size = Math.random()*50 + 20;
    bubble.style.width = size + 'px';
    bubble.style.height = size + 'px';
    bubble.style.left = Math.random()*100 + '%';
    bubble.style.animationDuration = (Math.random()*3+4) + 's';
    bubbleContainer.appendChild(bubble);
  }


function showTab(tab){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.querySelectorAll('.content>div').forEach(c=>c.style.display='none');
  if(tab==='users'){
    document.querySelectorAll('.tab')[0].classList.add('active');
    document.getElementById('usersTab').style.display='block';
  }else{
    document.querySelectorAll('.tab')[1].classList.add('active');
    document.getElementById('topupTab').style.display='block';
  }
}

const users = JSON.parse(localStorage.getItem('users')) || {};
const topups = JSON.parse(localStorage.getItem('topups')) || [];

function renderUsers(){
  let html = `<h3>Registered Users</h3>`;
  html += `<table border="1" width="100%" cellpadding="6" style="border-collapse:collapse;text-align:center">
            <tr><th>User ID</th><th>Name</th><th>Username</th><th>Email</th><th>Phone</th><th>Action</th></tr>`;
  Object.values(users).forEach(u=>{
    html += `<tr>
              <td>${u.userId||'---'}</td>
              <td>${u.name}</td>
              <td>${u.username||'-'}</td>
              <td>${u.email||'-'}</td>
              <td>${u.mobile}</td>
              <td><button class="fail" onclick="deleteUser('${u.mobile}')">Delete</button></td>
            </tr>`;
  });
  html += `</table>`;
  document.getElementById('usersTab').innerHTML = html;
}

function deleteUser(mobile){
  if(confirm("Delete this user?")){
    delete users[mobile];
    localStorage.setItem('users', JSON.stringify(users));
    renderUsers();
  }
}

function renderTopups(){
  let html = `<h3>Topup Requests</h3>`;
  topups.forEach((t,i)=>{
    html += `<div class="card">
      <b>ID #${t.id||i+1} | ${t.username||'Unknown'} | ${t.package} - ৳${t.amount}</b><br>
      User ID: ${t.userId} | Mobile: ${t.mobile} | UID: ${t.uid}<br>
      Method: ${t.method} | Status: <span class="status-${t.status.toLowerCase()}">${t.status}</span><br>
      Date: ${t.date}<br>
      ${t.status==='Pending'?`
        <button class="btn complete" onclick="completeTopup(${i})">Complete</button>
        <button class="btn fail" onclick="failTopup(${i})">Fail</button>`:''}
    </div>`;
  });
  document.getElementById('topupTab').innerHTML = html;
}

function completeTopup(i){
  topups[i].status = "Completed";
  localStorage.setItem('topups', JSON.stringify(topups));
  alert("✅ Topup Completed!");
  renderTopups();
}
function failTopup(i){
  topups[i].status = "Failed";
  localStorage.setItem('topups', JSON.stringify(topups));
  alert("❌ Topup Failed!");
  renderTopups();
}

renderUsers();
renderTopups();
</script>
</body>
    </html>
